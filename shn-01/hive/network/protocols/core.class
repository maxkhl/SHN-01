--[[
    SHN-01 Network Core Protocol Class
        This class represents the CORE protocol in the SHN-01 system.
        It serves as the foundational protocol for basic communications.
]]
local command = newClass(class("../protocol"))

function command:constructor(hive)
    assert(self, "Must be called on a object")
    local sequenceClass = class("../sequence")
    
    local sequences = {
        sequenceClass.create(hive, self, getAbsolutePath("../sequences/bootstrap/manifest.lua"), true),
        sequenceClass.create(hive, self, getAbsolutePath("../sequences/debug/manifest.lua"), true),
        sequenceClass.create(hive, self, getAbsolutePath("../sequences/error/manifest.lua"), true)
    }
    
    -- Initialize protocol properties directly
    self.server = hive
    self.name = "CORE"
    self.description = "Basic communications"
    self.port = 2015
    
    -- Create unique sequences table for this protocol instance
    self.sequences = setmetatable({}, {__name = "sequences_for_CORE"})
    for i, seq in ipairs(sequences) do
        self.sequences[seq.name] = seq
    end
end

return command