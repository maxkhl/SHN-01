--[[
    SHN-01 Network Message Class
        This class represents a network message in the SHN-01 system.
        It encapsulates the details of a message, including the remote address,
        protocol, distance, and data payload.
]]
local message = newClass()
function message:constructor(remoteAddress, protocol, distance, ...)
    assert(remoteAddress, "No remote address given")
    assert(protocol, "No protocol given")
    assert(self, "Must be called on a object")
    assert(distance == nil or type(distance) == "number", "Invalid distance, expected number or nil")

    self.remoteAddress = remoteAddress
    self.protocol = protocol
    self.distance = distance or 0
    self.data = {...} -- Store the message data as a table

end

function message:__tostring()
    assert(self, "Must be called on a object")
    return "<c=0x00FFFF>[Message]</c> from <c=0xFFFF00>" .. tostring(self.remoteAddress) .. "</c> via <c=0xFFFF00>" .. tostring(self.protocol.name) .. "</c> at distance <c=0xFFFF00>" .. tostring(self.distance) .. "</c> with data: <c=0xFFFFFF>" .. table.concat(self.data, ", ") .. "</c>"
end

function message:senderString()
    assert(self, "Must be called on a object")
    return "<c=0x00FFFF>[Sender]</c> <c=0xFFFF00>" .. tostring(self.remoteAddress) .. "</c> at distance <c=0xFFFF00>" .. tostring(self.distance) .. "</c>"
end
return message