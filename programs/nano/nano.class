--[[
    SHN-01 NANO file editor
        This class represents the NANO file editor in the SHN-01 system.
        It handles rendering and updating the editor on the screen.
]]
local nano = newClass(class("/shn-01/view"))
local database = require("/systems/database")



function nano:constructor(filePath)
    assert(self, "Must be called on a object")

    self.filePath = filePath
    self.fileContent = file.readLines(filePath)
    self.error = false
    if not self.fileContent then
        error("NANO File not found: " .. filePath)
        self.error = true
        return
    end


    self.base:constructor(screen)
end


-- Renders the file editor
function nano:render(startY, endY)
    local output = {}
    local c = 0
    if self.fileContent == nil then
        return {"Error: File content is nil.", self.filePath}
    end
    for i = startY, #self.fileContent do
        if i > endY then break end
        c = c + 1
        output[c] = self.fileContent[i] or ""
    end
    return output
end

local keyboard = require("/systems/keyboard.lua")
-- Handles key events
function nano:onKey(char, code)
end

function nano:getVerticalSize()
    return #self.fileContent
end

return nano